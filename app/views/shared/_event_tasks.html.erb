<div class="container mt-5">
  <div class="row">
    <div class="col-3"></div>
    <div class="col-6 d-flex flex-column gap-3" data-controller="tasks">
      <% tasks.each do |task| %>
        <div
          class="event-task-container d-flex flex-column"
          data-action="click->tasks#toggleDisplay">
          <div class="event-task-header d-flex justify-content-between align-items-center">
            <div class="card-body fs-4">
              <input type="checkbox" class="task-checkbox me-2" <%= task.status == 'archived' ? 'checked disabled' : 0 %>>
              <strong><%= task.name %></strong>
            </div>
            <p class="m-0 event-task-status-badge <%= task.status %>"><%= task.status %></p>
          </div>
          <div class="d-flex flex-column card-content" data-tasks-target='task'>
            <hr>
            <span class="mb-3 event-task-category-badge <%= task.category %>"><%= task.category %></span>
            <p><%= task.description %></p>
            <% task.tasks.each do |task| %>
              <p class="ms-5">â†ª <%= task.name %></p>
            <% end %>
            <p class='m-0 task-date'><i class="fa-solid fa-calendar-days me-1"></i>From: <%= task.start.strftime("%d.%m.%Y") %></p>
            <p class='m-0 task-date'><i class="fa-solid fa-calendar-days me-1"></i>End: <%= task.end.strftime("%d.%m.%Y") %></p>
            <hr>
            <div class="task-members d-flex gap-1 justify-content-end align-items-center">
              <%= link_to '#',
                data: {bs_toggle: "tooltip", bs_placement: 'top'},
                title: 'Assign Member',
                class: 'me-2' do %>
                <i class="fa-solid fa-square-plus fs-4 text-light"></i>
              <% end %>
              <% if task.event_members.any? %>
                <% task.event_members.each do |event_member| %>
                  <%= image_tag event_member.user.avatar_url,
                    alt: "user-avatar",
                    class: 'event-member-avatar',
                    data: {bs_toggle: "tooltip", bs_placement: 'top'},
                    title: "#{event_member.user.first_name} #{event_member.user.last_name}" %>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="col-3"></div>
  </div>
</div>
